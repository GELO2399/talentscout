<ul id="applications-list">
  {% for application in applications %}
    <li id="application-{{ application.id }}">
      <strong>{{ application.job.title }}</strong> - 
      <span id="status-{{ application.id }}">
        {% if application.status == 'pending' %}
          <span class="badge bg-warning">Pending</span>
        {% elif application.status == 'accepted' %}
          <span class="badge bg-success">Accepted</span>
        {% elif application.status == 'rejected' %}
          <span class="badge bg-danger">Rejected</span>
        {% endif %}
      </span>
    </li>
  {% endfor %}
</ul>

<!-- WebSocket Script -->
<script>
    const userId = "{{ request.user.id }}";
    const socket = new WebSocket('ws://' + window.location.host + '/ws/applications/' + userId + '/');

    socket.onmessage = function(event) {
        const data = JSON.parse(event.data);
        if (data.action === 'status_update') {
            const element = document.querySelector(`#status-${data.id}`);
            if (element) {
                element.innerHTML = `<span class="badge bg-success">Accepted</span>`;
            }
        }
    };
</script>
