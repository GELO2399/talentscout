{% extends 'base.html' %}
{% block content %}
<h2>{{ job.title }}</h2>
<p><strong>Location:</strong> {{ job.location }}</p>
<p><strong>Type:</strong> {{ job.get_job_type_display }}</p>
<p><strong>Description:</strong></p>
<p>{{ job.description }}</p>

<h3>Applicants ({{ applications.count }})</h3>
<ul>
  {% for app in applications %}
    <li>
      <strong>{{ app.applicant.username }}</strong> - Applied on {{ app.applied_at|date:"F j, Y" }}
      <form method="post" style="display:inline;">
        {% csrf_token %}
        <input type="hidden" name="applicant_id" value="{{ app.applicant.id }}">
        
        <button type="submit" name="action" value="accept" {% if app.status == 'accepted' %}disabled{% endif %}>
          {% if app.status == 'accepted' %}Accepted{% else %}Accept{% endif %}
        </button>

        <a href="{% url 'messaging:start_conversation' application.applicant.id %}" class="btn btn-primary">
          Message
        </a>
      </form>
    </li>
  {% empty %}
    <li>No applicants yet.</li>
  {% endfor %}
</ul>

<a href="{% url 'users:employer_dashboard' %}">‚Üê Back to Dashboard</a>
{% endblock %}
